name: Basic Info


on: 
  workflow_dispatch:
  push:
    branches:
     - main
      


jobs:
  display-info:
    runs-on: ubuntu-latest

    
    steps:
      - name: Start build process
        run: echo "Build process started..."

      - &echo-template
        name: Echo template
        run: echo "this is a reusable step"
        shell: bash

    
      - name: ğŸ–¥ï¸ Show GitHub Context
        run: |
          echo "ğŸ–¥ï¸ Runner OS: $RUNNER_OS"
          echo "ğŸ“‚ Repository: ${{ github.repository }}"
          echo "ğŸ”§ Workflow: ${{ github.workflow }}"
          echo  "ğŸš€ Triggered by: ${{ github.event_name }}"
          echo  "ğŸ‘¤ Actor: ${{ github.actor }}"
          echo  "ğŸ”¢ Run Number: ${{ github.run_number }}"
          echo  "ğŸŒ¿ Branch: ${GITHUB_REF#refs/heads/}"
          echo "ğŸ“Š Lines of Code: $(find . \
           -type d ( -name node_modules -o -name .git -o -name dist -o -name bin -o -name obj ) -prune -o \
           -type f ( -name ".cs" -o -name ".ts" -o -name "*.tsx" ) -print0 | xargs -0 cat | wc -l)"
          
      - *echo-template
      
  build-project:
    runs-on: ubuntu-latest

    steps: 
      - name: Checkout code
        uses: actions/checkout@v5.0.0

      - name: Install .NET 9
        uses: actions/setup-dotnet@v5.0.0
        with:
          dotnet-version: '9.0.x'

      - name: Build project
        working-directory: ./TodoApi
        run: dotnet build 

  count-lines:
    runs-on: ubuntu-latest

    steps:
      - name: Count lines
        run:  |
          echo "ğŸ“Š Lines of Code: $(find . \
          -type d \( -name node_modules -o -name .git -o -name dist -o -name bin -o -name obj \) -prune -false -o \
          -type f \( -name "*.cs" -o -name "*.ts" -o -name "*.tsx" \) \
          -exec cat {} + | wc -l)"

      

  
   
    
