name: Basic Info


on: 
  workflow_dispatch:
  push:
    branches:
     - main
      


jobs:
  display-info:
    runs-on: windows-latest

    
    steps:
      - name: Start build process
        run: Write-Output "Build process started..."

      - &echo-template
        name: Echo template
        run: Write-Output "this is a reusable step"
        shell: powershell

    
      - name: 🖥️ Show GitHub Context
        run: |
          Write-Output  "🖥️ Runner OS: $RUNNER_OS"
          Write-Output  "📂 Repository: ${{ github.repository }}"
          Write-Output  "🔧 Workflow: ${{ github.workflow }}"
          Write-Output  "🚀 Triggered by: ${{ github.event_name }}"
          Write-Output  "👤 Actor: ${{ github.actor }}"
          Write-Output  "🔢 Run Number: ${{ github.run_number }}"
          Write-Output  "🌿 Branch: ${GITHUB_REF#refs/heads/}"
          $csCount =    Get-ChildItem -Recurse -Include *.cs |
                        Where-Object { $_.FullName -notmatch '\\node_modules\\|\\bin\\|\\obj\\|\\.git\\|\\dist\\|\\.next\\' } |
                        Measure-Object | Select-Object -ExpandProperty Count
                        
          Write-Output "🌳 C# Files: $csCount"
          
      - *echo-template
      
  build-project:
    runs-on: ubuntu-latest

    steps: 
      - name: Checkout code
        uses: actions/checkout@v5.0.0

      - name: Install .NET 9
        uses: actions/setup-dotnet@v5.0.0
        with:
          dotnet-version: '9.0.x'

      - name: Build project
        working-directory: ./TodoApi
        run: dotnet build 

  count-lines:
    runs-on: ubuntu-latest

    steps:
      - name: Count lines
        run:  |
          echo "📊 Lines of Code: $(find . \
          -type d \( -name node_modules -o -name .git -o -name dist -o -name bin -o -name obj \) -prune -false -o \
          -type f \( -name "*.cs" -o -name "*.ts" -o -name "*.tsx" \) \
          -exec cat {} + | wc -l)"

      

  
   
    
