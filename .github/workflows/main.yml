name: Basic Info


on: 
  workflow_dispatch:
  push:
    branches:
     - main
      


jobs:
  display-info:
    runs-on: ubuntu-latest

    
    steps:
      - name: Start build process
        run: echo "Build process started..."

      - &echo-template
        name: Echo template
        run: echo "this is a reusable step"
        shell: bash

    
      - name: 🖥️ Show GitHub Context
        run: |
          echo "🖥️ Runner OS: $RUNNER_OS"
          echo "📂 Repository: ${{ github.repository }}"
          echo "🔧 Workflow: ${{ github.workflow }}"
          echo  "🚀 Triggered by: ${{ github.event_name }}"
          echo  "👤 Actor: ${{ github.actor }}"
          echo  "🔢 Run Number: ${{ github.run_number }}"
          echo  "🌿 Branch: ${GITHUB_REF#refs/heads/}"
          echo "📊 Lines of Code: $(find . \
           -type d ( -name node_modules -o -name .git -o -name dist -o -name bin -o -name obj ) -prune -o \
           -type f ( -name ".cs" -o -name ".ts" -o -name "*.tsx" ) -print0 | xargs -0 cat | wc -l)"
          
      - *echo-template
      
  build-project:
    runs-on: ubuntu-latest

    steps: 
      - name: Checkout code
        uses: actions/checkout@v5.0.0

      - name: Install .NET 9
        uses: actions/setup-dotnet@v5.0.0
        with:
          dotnet-version: '9.0.x'

      - name: Build project
        working-directory: ./TodoApi
        run: dotnet build 

  count-lines:
    runs-on: ubuntu-latest

    steps:
      - name: Count lines
        run:  |
          echo "📊 Lines of Code: $(find . \
          -type d \( -name node_modules -o -name .git -o -name dist -o -name bin -o -name obj \) -prune -false -o \
          -type f \( -name "*.cs" -o -name "*.ts" -o -name "*.tsx" \) \
          -exec cat {} + | wc -l)"

      

  
   
    
